# Data Model: UI Redesign for Tasks Dashboard

## Entities

### Task
**Description**: Represents a user's task item with status and metadata

#### Fields
| Field | Type | Constraints | Description |
|-------|------|-------------|-------------|
| id | number | Required, Unique, Positive Integer | Unique identifier for the task |
| title | string | Required, Min: 1, Max: 255 | Task title displayed to user |
| description | string | Optional, Max: 1000 | Detailed task description |
| completed | boolean | Required, Default: false | Completion status |
| user_id | number | Required, Foreign Key | Reference to owning user |
| created_at | string | Required, ISO Date String | Creation timestamp |
| updated_at | string | Required, ISO Date String | Last update timestamp |

#### Relationships
- **User**: Many-to-One (Many tasks belong to one user)

#### Validation Rules
- `title` must be between 1 and 255 characters
- `description` is optional, maximum 1000 characters
- `completed` defaults to false when creating new tasks
- `id` is auto-generated by the backend
- `user_id` must reference an existing user
- `created_at` and `updated_at` are managed by the backend

#### State Transitions
- **Active** → **Completed**: When user toggles completion checkbox
- **Completed** → **Active**: When user untoggles completion checkbox
- **Any State** → **Deleted**: When user deletes the task

## UI State Models

### Filter State
**Description**: Represents the current filter selection for task display

#### Fields
| Field | Type | Values | Description |
|-------|------|--------|-------------|
| currentFilter | string | 'all', 'active', 'completed' | Currently applied filter |

### Search State
**Description**: Represents the current search query for task filtering

#### Fields
| Field | Type | Constraints | Description |
|-------|------|-------------|-------------|
| searchTerm | string | Optional | Current search query |

### Editing State
**Description**: Tracks which task is currently in edit mode

#### Fields
| Field | Type | Constraints | Description |
|-------|------|-------------|-------------|
| editingTaskId | number | Optional | ID of task currently being edited |
| editingFields | object | Optional | Temporary field values during editing |

### Loading States
**Description**: Tracks loading states for various operations

#### Fields
| Field | Type | Values | Description |
|-------|------|--------|-------------|
| isPageLoading | boolean | true/false | Overall page loading state |
| isRefreshing | boolean | true/false | Manual refresh operation |
| isSavingTask | number/null | Task ID or null | Task ID currently being saved |
| isTogglingTask | number/null | Task ID or null | Task ID currently being toggled |
| isDeletingTask | number/null | Task ID or null | Task ID currently being deleted |

## Display Calculations

### Statistics Display
**Description**: Computed values for displaying task statistics

#### Calculations
- **Total Tasks**: `tasks.length`
- **Active Tasks**: `tasks.filter(task => !task.completed).length`
- **Completed Tasks**: `tasks.filter(task => task.completed).length`

### Filtered Tasks
**Description**: Computed list based on current search and filter state

#### Logic
```
filteredTasks = tasks.filter(task => {
  // Apply search filter
  const matchesSearch =
    task.title.toLowerCase().includes(searchTerm.toLowerCase()) ||
    (task.description && task.description.toLowerCase().includes(searchTerm.toLowerCase()));

  // Apply category filter
  if (currentFilter === 'active') {
    return !task.completed && matchesSearch;
  } else if (currentFilter === 'completed') {
    return task.completed && matchesSearch;
  } else {
    return matchesSearch; // 'all' filter
  }
})
```

## API Response Model
**Description**: Defines the expected structure of API responses (unchanged)

### Task Response
```
{
  "id": number,
  "title": string,
  "description": string | null,
  "completed": boolean,
  "user_id": number,
  "created_at": string, // ISO date string
  "updated_at": string  // ISO date string
}
```

### Task List Response
```
[
  // Array of Task Response objects
]
```

### Error Response
```
{
  "error": string,
  "message": string
}
```